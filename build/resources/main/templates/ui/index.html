
<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" >
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>main</title>
    <link rel="stylesheet" th:href="@{/css/main.css}">
    <link rel="stylesheet" th:href="@{/css/nav.css}">
    <link rel="icon" href="data:;base64,=" />
    <nav th:replace="~{nav.html::top-nav}"></nav>
</head>
<body>
    <nav th:replace="~{nav.html::side-nav}"></nav>

    <div id="elementsContainer">
        <div class="question-box">
            <h2>추천 받아보세요</h2>
        </div>
    
        <div class="button-container">
        
            <button id="fastRecommendation">빠른 추천</button>
    
            <form id="submitForm" action="/chatgpt-api" method="POST" style="display:none;">
                <input id="inputInterests" type="hidden" name="interest">
            </form>
    
            <button onclick="location.href='/ui/select'">선택 추천</button>
        </div>
    </div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.7.6/lottie.min.js"></script>
<script>
(() => {
    document.querySelector('#fastRecommendation').addEventListener('click', () => {

        fetch('/userInterestsPlz', {
            method: "POST",
            headers: { 'Content-Type': 'application/json' }
        })
        .then(response => response.json())
        .then(res => {

            if (res && res.length > 0) {

                document.querySelector('#inputInterests').value = res;
                document.querySelector('#submitForm').submit();
                
            } else {
                alert("저장하신 관심사가 없습니다.");
            }
        })
        .catch(error => { alert(error.message); });
    });
})();




var animation = lottie.loadAnimation({
    container: document.getElementById('lottie-container'), // 애니메이션을 삽입할 요소
    renderer: 'svg', // 렌더링 방식 (svg 방식 사용)
    loop: true, // 애니메이션 반복 여부
    autoplay: true, // 자동 실행 여부
    path: '/json/robot-running.json' // 다운로드한 JSON 애니메이션 파일의 경로
  });
</script>


<script src="/js/nav.js"></script>
</body>

</html>

