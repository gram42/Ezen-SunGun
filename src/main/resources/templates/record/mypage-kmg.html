<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" >
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mypage2</title>
    <link rel="stylesheet" href="/css/mypage-kmg.css">
</head>
<body>
    <!-- *주의* 추후 파일 위치 옮길 것 -> user, 이름 mypage로 바꿀 것, 당연히 위치나 이름이 바뀌면 컨트롤러도 변경해줘야함 -->

    <h1>mypage2</h1>
    
    <div sec:authorize="isAnonymous">
        <h1>로그인 후 이용 가능합니다.</h1>
        <a href="/user/login">로그인</a>
        <a href="/ui/main">홈으로</a>
    </div>

    <div sec:authorize="isAuthenticated">

        <div th:if="${pointsByMonths == null or pointsByMonths.isEmpty()}">
            <div> 최근 기록이 없습니다. </div>
        </div>

        <div th:if="${pointsByMonths != null and !pointsByMonths.isEmpty()}">

            <div th:text="'주간 활동 점수 : ' + ${totalPoint}"></div>

            <div th:each="pointD : ${pointsByDays}">
                <div class="pointsByDays" th:attr="data-key=${pointD.key}, data-value=${pointD.value}"></div>
                <div th:text=" '주간 키 : ' + ${pointD.key} + ' 주간 밸류 : ' + ${pointD.value}"></div>
            </div>

            <div th:each="pointM : ${pointsByMonths}">
                <div class="pointsByMonths" th:attr="data-key=${pointM.key}, data-value=${pointM.value}"></div>
                <div th:text=" '월간 키 : '+ ${pointM.key} + ' 월간 밸류 : ' + ${pointM.value}"></div>
            </div>

            <div id="daysChartContainer"><canvas id="daysChart"></canvas></div>
            <div id="monthsChartContainer"><canvas id="monthsChart"></canvas></div>


        </div>

          
    </div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="/js/record/mypage-kmg.js"></script>
    
</body>
</html>
