마이페이지 & 기록
-----------------------------------------------------------------------------------------------------------------------------------

[순서]
테이블 생성 - 기록 기능구현 - 마이페이지 기능구현 - 테스트 - 통합

<테이블 생성>
NN조건, 유니크, id, 길이, 데이터 타입 등 생각해보기

1. [category] 카테고리 생성(카테고리 ID, 이름) - 일단 고정된 카테고리 제공 예정 추후 유저별 커스텀 기능은 생각해보기
2. [record] 기록 생성(기록 ID, 날짜, 본문, 달성 포인트, userid(FK), 카테고리 ID(FK)) - FK 연결법 알아보기, 
   userid / 날짜 / 카테고리로 복합키 예정 하루에 카테고리 하나당 한 개의 기록, 포인트 디폴트 값 = 0

# 기능구현
## 기록

html - [record]

날짜 설정 (+)

기본 접속 시 오늘의 기록 출력 (+)

날짜에 맞는 기록 출력(있으면 있는거 없으면 없는대로 출력 - 아마 새로운 빈 데이터 자동 생성하게끔 만들어야할듯)(+)

카테고리별 정보와 버튼은 enhanced for문 사용(카테고리 변동의 유연성을 위함)(+)

카테고리별 버튼 활성/비활성화 - 포인트 적립(+)

기록과 저장, 출력은 모두 AJAX 통신으로 이루어질 예정(+)

본문 내용 저장 - null 가능(+)

본문 내용 수정 가능, 카테고리별 내용은 각 카테고리에만 출력(+)

카테고리 활성화 시에만 본문 내용과 저장 버튼 띄우기(+)


## 카테고리

카테고리 추가 (+)

카테고리 수정 (+)

카테고리 중복확인 (+)

카테고리 삭제 (-) - 외래키 사용으로인한 삭제 불가능, 추후 대체 기능 구현


## My page

그래프 - 기록 포인트, userid, category id와 연결해 카테고리별 점수 그래프로 표시

 - 데이터 받기

오늘 기준 일주치 데이터 받아와서 카테고리별 + 전체 포인트 합산 출력(내가 약 일주일 간 뭘 얼마나 했나) (+)

최근 기록 대비 출력 설정 (+)

주단위, 월단위 단위별 포인트 합계 출력(+)

포인트 합계 결과에 맞춘 차트 그리기 (+)

접속시 월간 차트 등장, 이후 선택에 따라 주간, 월간 차트 등장 (+)

## 우리의 서비스가 뭔지 사용자에게 정확히 알려줘야함 고민해보기
SUN - step up now, 태양처럼 빛날 미래를 원하신다면 우리와 함께 하세요

## 사용 안내 페이지 만들기
우리 사이트는 어떤 사이트다(-)

이런 기능은 어떻게 쓴다(-)

# 기본 구성
## 회원가입
아이디 - 중복검사, 공백제거, 영문자, 변수명은 현재로 유지(+)


비번 - 길이, 영문자(대소), 숫자, 특수문자, 비번확인 일치여부, 암호화(-)

이메일 - 형식검사, 인증번호 메일로 보내기(인증번호 or 인증 링크 - 인증링크는 인증 후 이메일 변경 못하게 해야함)(-)

이메일 인증번호 확인(-)

닉네임 - 중복검사, 공백제거(-)

아이디, 닉네임 중복확인 후 내용 변동이 있을 시 재 중복확인하도록 변경해야함(-)

성별 - null 가능(-)

생년월일 - 데이터타입 date, null 가능(-)

## 관심분야 설정
카테고리 + 유저id + 생년월일(nullable = t) + 성별(nullable = t) = (카테고리 + id) 복합키? 생각해봐야할듯 (-)

기록은 유저 id로 찾으면 될 듯(-)

## 로그인
로그인 로그아웃 등에 따라 메인 페이지 다르게 표시(+)

로그아웃 방식 수정(+)

네비게이션 바 제작(+)

우상단 클릭 메뉴 제작(+)

기본적인 로그인 기능(+)

로그인 안했을 경우 로그인 페이지로 이동(+)

로그인 햇을 경우 다음 내용 출력(+)

OAuth(-)

## 회원정보 수정
회원 가입과 마찬가지로 비밀번호 검사(자세한 내용은 회원가입 구성 부분 확인)(-)

변경 불가능(아이디, 이메일 등 더 생각하기)(-)

개인 정보 수정, 회원탈퇴(+)

개인 정보 수정을 누르면 각종 정보 수정 가능하게 비밀번호와 정보 수정시 비번 재입력 창 띄우기(+)

비번 전송시 fetch로 확인 결과에 따라 수정 창 or 에러 메세지(+)

회원 탈퇴시 모든 기록 지우기 (모든 댓글 - 게시글, 기록 등을 지워야 탈퇴 가능)(+)

회원 탈퇴시 댓글 관계 제거 작성자 null로 등록(+)

비밀번호 변경(+)

로그아웃(+)

세션활용 세션을 이용한 유저 정보 저장 회원 탈퇴시 세션 무효화(+)

DB설계도, 프로젝트 계획서 첨부(+)

에러 페이지 추가(+)

# 기능 구현 후 수정 사항
## mypage
주간 과거 기록의 순서가 반대로 바뀜 -> 인덱스 로직 수정(+)

로그인 메소드 삭제 -> 시큐리티 로그인 이용, 마이페이지 세션저장 삭제 -> 인증 정보로 유저 찾기 (+)

세션 저장이 아닌 인증으로 데이터 참조 방식으로 변경 (+)

월간 기록만 존재하고 주간 기록이 존재하지 않으면(빈 기록데이터 조차 없다면) 주간 기록 없다고 출력(+)

## record
기존 기록이 있을 경우 카테고리를 추가해도 기존 기록 열람시 새로운 카테고리가 추가되지 않은 이전 기록을 불러옴 -> 기록 불러오기 전에 카테고리 검사 후 없으면 추가 기능 구현 (-)

# GitHub
## merge

각자 만든 기능 충돌 없이 모두 합치기(-)

시큐리티에 세션 관리들어가서 세션으로 정보 불러오는 mypage가 작동안함 고치기(+)

# CSS, 디자인, 화면설계
## record
처음 접속하면 체크만 가능하고 내용은 readonly(+)

기록 부분 체크박스 안보이게 처리 버튼처럼 생긴 글자만 보이는데 누르면 텍스트박스 등장 readonly(+)

체크여부에 따라 색 변경(+)

수정버튼 클릭시 텍스트 박스 수정 가능, 완료버튼 등장 완료 버튼 누르면 저장 후 다시 readonly(+)

완료 버튼은 textarea 내부에 위치 완료버튼 누르면 저장 후 완료버튼 사라지고 첫 접속했을 때처럼 다시 readonly와 수정버튼(+)


### 나중에 추가하고 싶으면 추가
관심분야 선택 추천 시 성별, 나이 입력 받아야할 듯?(남, 여, 성별X, 나이, 나이X)

문의 하기 / 문의 내역

게시글이든 기록이든 본문 내용 수정 후 완료 안눌렀는데 페이지 바꾸려고하면 안내메세지 띄우기
<테이블 생성>
NN조건, 유니크, id, 길이, 데이터 타입 등 생각해보기


아이디 찾기, 비밀번호 찾기(-)

이메일 인증번호 확인되면 이메일로 아이디 보내주기(-)

아이디+이메일 인증번호 확인되면 비밀번호 변경창으로 이동(-)


# 이름, 경로 변경 사항(혹시모를 충돌 대비)
mypage -> userInfo로 이름 변경, 접속경로 변경

mypage-kmg 접속경로 변경